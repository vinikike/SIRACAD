<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/plantillas/default.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:define name="titulo">
        <h:outputText value="Matricula Nocturna"/>
    </ui:define>
    <ui:define name="acciones">      
        <p:submenu label="Navegaci&oacute;n" icon="ui-icon-cancel">
            <p:menuitem value="Buscar estudiante" icon="ui-icon-search" oncomplete="buscarEstudianteDialog.show();"/>
            <p:menuitem value="Guardar" icon="ui-icon-disk" process="@(form)" update="@(form)" action="#{matriculaNocturna.guardarAlumno$action}"/>
            <p:menuitem value="Cancelar" icon="ui-icon-trash" ajax="true" update="@(#contenidoForm)">
            <pe:resetInput for="@(#contenidoForm)"/>
            </p:menuitem>
            <p:menuitem value="Inicio" action="inicio?faces-redirect=true" icon="ui-icon-home" />
            <p:menuitem value="Matricula Media" action="matriculaMedia?faces-redirect=true" icon="ui-icon-contact" />            
            <p:menuitem value="Matricula B&aacute;sica" action="matriculaBasica?faces-redirect=true" icon="ui-icon-contact" />            
            <p:menuitem value="Matricula Parvularia" action="matriculaNocturna?faces-redirect=true" icon="ui-icon-contact" />            
            <p:menuitem value="Imprimir" icon="ui-icon-print" /> 
        </p:submenu>      
    </ui:define>
    <ui:define name="contenido">
        <h2 align="center">Ficha de inscripcion de Educaci&oacute;n Nocturna</h2>
        <h3 align="center">Periodo de Estudio 2013</h3>
        <h2>Ficha No. </h2>

        <p:accordionPanel>
            <p:tab title="Datos del alumno">
                <h:panelGrid columns="6" cellspacing="4">
                    <h:outputLabel value="NIE:"/>
                    <p:inputText id="nie" maxlength="8" value="#{matriculaNocturna.alumno$nie}" size="8" required="true"  requiredMessage="Escribir el NIE del Estudiante" />

                    <h:outputLabel value="&nbsp;&nbsp;Nombre:" />
                    <p:inputText id="AluNombre" value="#{matriculaNocturna.alumno$nombre}" size="40" required="true"  requiredMessage="Escribir el Nombre del Estudiante" />

                    <h:outputLabel value="&nbsp;&nbsp;Apellido:" />
                    <p:inputText id="AluApellido" value="#{matriculaNocturna.alumno$apellido}" size="40" required="true"  requiredMessage="Escribir el Apellido del Estudiante" />
                </h:panelGrid>

                <pe:keyFilter for="nie" mask="int"/>

                <h:panelGrid columns="6" cellspacing="5">
                    <h:outputLabel  value="Edad en a&ntilde;os:" />
                    <p:spinner value="#{matriculaNocturna.alumno$edad$anios}" max="99"  min="10" maxlength="2" size="3" required="true" requiredMessage="Debe introducir la Edad del Estudiante" />

                    <h:outputLabel value="Fecha de nacimiento" />
                    <p:calendar showOn="button" value="#{matriculaNocturna.alumno$fechaNacimiento}" pattern="dd/MM/yyyy" navigator="true" required="true" requiredMessage="Ingrese la fecha de nacimiento "/>

                    <h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sexo" />  
                    <p:selectOneRadio value="#{matriculaNocturna.alumno$sexo}" layout="pageDirection">  
                        <f:selectItem itemLabel="Masculino" itemValue="M" />  
                        <f:selectItem itemLabel="Femenino" itemValue="F" />  
                    </p:selectOneRadio> 
                </h:panelGrid>

                <h:panelGrid columns="2" cellspacing="5" >
                    <h:outputLabel value="&nbsp;&nbsp;Lugar de nacimiento:" />
                    <p:inputText value="#{matriculaNocturna.alumno$lugarNacimiento}" size="75" required="true" requiredMessage="Escribir el lugar de nacimiento" />

                    <h:outputLabel value="&nbsp;&nbsp;Direcci&oacute;n del Alumno/a:" />
                    <p:inputText value="#{matriculaNocturna.alumno$direccion}" size="75" required="true" requiredMessage="Escribir la Direccion del estudiante" />

                    <h:outputLabel value="Centro Escolar donde estudi&oacute; el a&ntilde;o anterior:   " />
                    <p:inputText value="#{matriculaNocturna.alumno$escuelaAnterior}" size="75" required="true" requiredMessage="Escriba el nombre del Centro Educativo donde estudio el a&ntilde;o anterior" />
                </h:panelGrid>
            </p:tab>

            <p:tab title="Estudio">
                <h:panelGrid columns="8" cellspacing="10">
                    <h:outputLabel value="Grado a estudiar:" />
                    <p:selectOneMenu value="#{matriculaNocturna.alumno$gradoEstudio}" style="width: 150px">
                        <f:selectItem itemLabel="Nivel 1" itemValue="1" />
                        <f:selectItem itemLabel="Nivel 2" itemValue="2" />
                        <f:selectItem itemLabel="Nivel 3" itemValue="3" />
                        <f:selectItem itemLabel="Septimo" itemValue="4" />
                        <f:selectItem itemLabel="Octavo" itemValue="5" />
                        <f:selectItem itemLabel="Noveno" itemValue="6" />
                        <f:selectItem itemLabel="Primer a&ntilde;o" itemValue="7" />
                        <f:selectItem itemLabel="Segundo a&ntilde;o" itemValue="8" />
                    </p:selectOneMenu>

                    <h:outputLabel value="Opcion:" />
                    <h:outputText value="General" style="font-size: 15pt !important;" />

                    <h:outputLabel value="Sección:" />
                    <p:selectOneMenu value="#{matriculaNocturna.alumno$seccion}" style="width: 50px">
                        <f:selectItem itemLabel="A" itemValue="A" />
                        <f:selectItem itemLabel="B" itemValue="B" />
                        <f:selectItem itemLabel="C" itemValue="C" />
                    </p:selectOneMenu>

                    <h:outputText value="Turno: " />
                    <h:outputText value="Nocturno" style="font-size: 15pt !important;" />
                </h:panelGrid>

                <h:panelGrid columns="4" cellspacing="5">
                    <h:outputText value="Repite Grado:" />  
                    <p:selectOneRadio value="#{matriculaNocturna.alumno$repiteGrado}" layout="pageDirection" >  
                        <f:selectItem itemLabel="No" itemValue="No" />  
                        <f:selectItem itemLabel="Si" itemValue="Si" />  
                    </p:selectOneRadio> 

                    <h:outputText value="&iquest;Estudio parvularia?:" />  
                    <p:selectOneRadio value="#{matriculaNocturna.alumno$estudioParvularia}" layout="pageDirection">  
                        <f:selectItem itemLabel="Si" itemValue="Si" />  
                        <f:selectItem itemLabel="No" itemValue="No" />  
                    </p:selectOneRadio> 
                </h:panelGrid> 
            </p:tab>

            <p:tab title="Estado familiar">
                <h:panelGrid columns="6" cellspacing="10" width="100%">
                    <h:outputLabel value="Nombre del Padre:" />
                    <p:inputText id="Nom_Padre" value="#{matriculaNocturna.padre$nombre}" size="30" />

                    <h:outputLabel value="Apellido:" />
                    <p:inputText id="Apell_Padre" value="#{matriculaNocturna.padre$apellido}" size="30" />

                    <h:outputLabel value="Telefono:" />
                    <p:inputText id="TelPadre" value="#{matriculaNocturna.padre$telefono}" size="8" maxlength="8" />

                    <h:outputLabel value="Nombre de la Madre:" />
                    <p:inputText id="Nom_Madre" value="#{matriculaNocturna.madre$nombre}" size="30" />

                    <h:outputLabel value="Apellido:" />
                    <p:inputText id="Apell_Madre" value="#{matriculaNocturna.madre$apellido}" size="30" />

                    <h:outputLabel value="Telefono:" />
                    <p:inputText id="TelMadre" value="#{matriculaNocturna.madre$telefono}" size="8" maxlength="8" />
                </h:panelGrid>

                <pe:keyFilter for="TelPadre" mask="int"/>
                <pe:keyFilter for="TelMadre" mask="int"/>

                <p:fieldset legend="Persona Responsable ante la Instituci&oacute;n">
                    <h:panelGrid columns="6" cellspacing="10">
                        <h:outputLabel value="Nombre:" />
                        <p:inputText id="Nombresponsable" value="#{matriculaNocturna.responsable$nombre}" size="30" required="true" requiredMessage="Escribir el Nombre del representante ante la instituci&oacute;n" />

                        <h:outputLabel value="Apellido:" />
                        <p:inputText id="Apellresponsable" value="#{matriculaNocturna.responsable$apellido}" size="30" required="true" requiredMessage="Escribir el Apellido del representante ante la instituci&oacute;n" />

                        <h:outputLabel value="Telefono:" />
                        <p:inputText id="TelRepresentante" value="#{matriculaNocturna.responsable$telefono}" required="true" requiredMessage="Introduzca el n&uacute;mero de Tel&eacute;fono del Responsable " size="7" maxlength="8" />
                    </h:panelGrid>

                    <pe:keyFilter for="TelRepresentante" mask="int"/>

                    <h:panelGrid columns="4" cellspacing="10">
                        <h:outputLabel value="Nº de DUI de responsable:   " />
                        <p:inputText id="DUIRepresentante" maxlength="9" value="#{matriculaNocturna.responsable$DUI}" required="true" requiredMessage="Introduzca el n&uacute;mero de DUI" size="9" style="font-size: 13pt !important;" />

                        <p:commandButton icon="ui-icon-search" immediate="true" oncomplete="buscarRepresentanteDialog.show();"/>
                        <p:commandButton icon="ui-icon-circle-close" immediate="true" action="#{matriculaNocturna.deseleccionarRepresentante$action}" update="@form"/>                    
                    </h:panelGrid>
                    <pe:keyFilter for="DUIRepresentante" mask="int"/>
                </p:fieldset>

                <br/>

                <p:fieldset legend="Estado Familiar">
                    <h:panelGrid cellspacing="10">
                        <p:selectOneRadio id="Estado_Familiar" value="#{matriculaNocturna.alumno$estadoFamiliar}">  
                            <f:selectItem itemLabel="Vive solo con la Madre" itemValue="VSM" />  
                            <f:selectItem itemLabel="Vive solo con el Padre" itemValue="VSP" /> 
                            <f:selectItem itemLabel="Vive con Padre y Madre" itemValue="VPM" />  
                            <f:selectItem itemLabel="Vive con familiares" itemValue="VCF" /> 
                            <f:selectItem itemLabel="No vive con Familiares" itemValue="NVF" />
                        </p:selectOneRadio> 
                    </h:panelGrid>   
                </p:fieldset>
                <br/>
            </p:tab>

            <p:tab title="Otra Informaci&oacute;n">
                <h:panelGrid columns="2" cellpadding="5">   
                    <h:outputText value="Documentos Presentados:" style="font-size: 12pt;" />  
                    <p:selectManyCheckbox  value="#{matriculaNocturna.alumno$documentosPresentados}" required="true" requiredMessage="Se debe presentar del Documentacion Completa para realizar la matricula">  
                        <f:selectItem itemLabel="Acta de nacimiento" itemValue="1" />  
                        <f:selectItem itemLabel="Certificado de grado anterior" itemValue="2" />  
                        <f:selectItem itemLabel="Ficha de inscripci&oacute;n" itemValue="2" />
                        <f:selectItem itemLabel="Boleta de Notas" itemValue="4" />  
                    </p:selectManyCheckbox>  
                </h:panelGrid>

                <br/>

                <p:fieldset legend="Partida de Nacimiento">
                    <h:panelGrid columns="8" cellspacing="10">
                        <h:outputLabel value="N&omicron;.:" />
                        <p:inputText id="PartidaNum" maxlength="5"  value="#{matriculaNocturna.alumno$noPartida}" size="4" required="true" requiredMessage="Escribir el n&uacute;mero de Partida" />

                        <h:outputLabel value="Folio" />
                        <p:inputText id="PartidaFolio" maxlength="5" value="#{matriculaNocturna.alumno$folioPartida}" size="4" required="true" requiredMessage="Debe escribir el Folio de la Partida" />

                        <h:outputLabel value="Tomo" />
                        <p:inputText id="PartidaTomo" maxlength="5"  value="#{matriculaNocturna.alumno$tomoPartida}" size="4" required="true" requiredMessage="Escriba el Tomo de la Partida" />

                        <h:outputLabel value="Libro" />
                        <p:inputText id="PartidaLibro" maxlength="5" value="#{matriculaNocturna.alumno$libro}" size="4" required="true" requiredMessage="Escribir el Libro de la Partida" />
                    </h:panelGrid>

                    <pe:keyFilter for="PartidaNum" mask="int"/>
                    <pe:keyFilter for="PartidaFolio" mask="int"/>
                    <pe:keyFilter for="PartidaTomo" mask="int"/>
                    <pe:keyFilter for="PartidaLibro" mask="int"/>
                </p:fieldset>

                <br/>

                <p:fieldset legend="Actividad Econ&oacute;mica del Estudiante">
                    <h:panelGrid columns="2" cellspacing="10">
                        <h:outputLabel value="Actividad Econ&oacute;mica (Tabajo):" />
                        <p:selectOneMenu  value="#{matriculaNocturna.alumno$actividadEconomica}" editable="false" style="width: 250px;" >
                            <f:selectItem itemLabel="No trabaja" itemValue="0" />
                            <f:selectItem itemLabel="Ca&ntilde;a de Azucar" itemValue="1" />
                            <f:selectItem itemLabel="Pesca" itemValue="2" />
                            <f:selectItem itemLabel="Pepenador de basura (Basureros)" itemValue="3" />
                            <f:selectItem itemLabel="Trabajo dom&eacute;stico remunerado" itemValue="4" />
                            <f:selectItem itemLabel="Coheter&iacute;as" itemValue="5" />
                            <f:selectItem itemLabel="Caf&eacute;" itemValue="6" />
                            <f:selectItem itemLabel="Ventas (Ambulantes, Mercado, etc.)" itemValue="7" />
                            <f:selectItem itemLabel="Servicios (Limpia Autos, Limpia Botas, etc.)" itemValue="8" />
                            <f:selectItem itemLabel="Trabajo Agricola (Excepto Caf&eacute; y Ca&ntilde;a) " itemValue="9" />
                            <f:selectItem itemLabel="Otros trabajos remunerados" itemValue="10" />
                        </p:selectOneMenu>                        
                    </h:panelGrid>                
                </p:fieldset>
                <br/>
            </p:tab>
        </p:accordionPanel>
    </ui:define>

    <ui:define name="dialogos">
        <p:dialog id="buscarEstudianteDialog" widgetVar="buscarEstudianteDialog" header="Buscar estudiante" modal="true" width="600" resizable="false" closable="true" draggable="true" >
            <p:dataTable value="#{matriculaNocturna.listaAlumnos}" var="alumno" filteredValue="#{matriculaNocturna.listaAlumnosFiltro}" paginator="true" paginatorAlwaysVisible="true" paginatorPosition="top" rows="7">
                <p:column headerText="NIE" filterBy="#{alumno.alumnoPK.nie}">
                    <h:outputText value="#{alumno.alumnoPK.nie}"/>
                </p:column>
                <p:column headerText="Nombres" filterBy="#{alumno.nombres}">
                    <h:outputText value="#{alumno.nombres}"/>
                </p:column>
                <p:column headerText="Apellidos" filterBy="#{alumno.apellidos}">
                    <h:outputText value="#{alumno.apellidos}"/>
                </p:column>
                <p:column>
                    <p:commandButton icon="ui-icon-circle-check" action="#{matriculaNocturna.seleccionarAlumno$action}" update="@(form)" immediate="true">
                        <f:setPropertyActionListener value="#{alumno}" target="#{matriculaNocturna.alumnoSeleccionado}"/>
                    </p:commandButton>
                </p:column>
            </p:dataTable>
        </p:dialog>
        <!-- **************************************************************** -->
        <p:dialog widgetVar="buscarRepresentanteDialog" header="Buscar representante" modal="true" resizable="false" width="500" closable="true" draggable="true" showEffect="fold" hideEffect="fold">
            <p:dataTable value="#{matriculaNocturna.listaRepresentantes}" var="representante" filteredValue="#{matriculaNocturna.listaRepresentantesFiltro}">
                <p:column headerText="DUI" filterBy="#{representante.representantePK.dui}" filterMatchMode="contains">
                    <h:outputText value="#{representante.representantePK.dui}"/>
                </p:column>                
                <p:column headerText="Nombre" filterBy="#{representante.nombre}" filterMatchMode="contains">
                    <h:outputText value="#{representante.nombre}"/>
                </p:column>
                <p:column headerText="Aprellido" filterBy="#{representante.apellido}" filterMatchMode="contains">
                    <h:outputText value="#{representante.apellido}"/>
                </p:column>                
                <p:column style="width: 24px;"> 
                    <p:commandButton icon="ui-icon-circle-check" action="#{matriculaNocturna.seleccionarRepresentante$action}" update="@(form)" immediate="true">
                        <f:setPropertyActionListener value="#{representante}" target="#{matriculaNocturna.representante}"/>
                    </p:commandButton>
                </p:column>                
            </p:dataTable>    
        </p:dialog>
    </ui:define>    
</ui:composition>